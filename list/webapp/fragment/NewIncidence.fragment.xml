<core:FragmentDefinition xmlns:tnt="sap.tnt" xmlns:core="sap.ui.core" xmlns="sap.m">

    <Panel >
        <headerToolbar>
            <Toolbar>
                <core:Icon src="{=  ${incidenceModel>Type} === '0' ? 'accept' :
                                    ${incidenceModel>Type} === '1' ? 'alert' :
                                    ${incidenceModel>Type} === '2' ? 'decline' : ''
                                }" ></core:Icon>
                <Title text="{i18n>incidence} {= ${incidenceModel>IncidenceId} ? parseInt(${incidenceModel>IncidenceId}) : '' } {path:'incidenceModel>CreationDate', formatter:'.Formatter.dateFormat'}" ></Title>
                <ToolbarSpacer ></ToolbarSpacer>
                <Button icon="sap-icon://save" press="onSaveIncidence" enabled="{= ${incidenceModel>EnabledSave} === true}"></Button>
                <core:Icon src="sap-icon://delete" press="onDeleteIncidence"></core:Icon>
            </Toolbar>
        </headerToolbar>
        <content>
            <HBox >
                <VBox class="sapUiSmallMarginEnd" >
                    <Label text="{i18n>incidenceDate}" required="true"></Label>
                    <DatePicker dateValue="{incidenceModel>CreationDate}" change="updateIncidenceCreationDate" valueState="{incidenceModel>CreatioDateState}"></DatePicker>
                </VBox>
                <VBox visible="{= ${incidenceModel>CreationDate} !== '' &amp;&amp; ${incidenceModel>CreationDate} !== undefined }" class="sapUiSmallMarginEnd" >
                    <Label text="{i18n>incidenceReason}" required="true"></Label>
                    <Input value="{incidenceModel>Reason}" change="updateIncidenceReason" valueState="{incidenceModel>ReasonState}"></Input>
                </VBox>
                <VBox visible="{= ${incidenceModel>CreationDate} !== '' &amp;&amp; ${incidenceModel>CreationDate} !== undefined }" class="sapUiSmallMarginEnd" >
                    <Text text="{i18n>incidenceType}" ></Text>
                    <Select selectedKey="{incidenceModel>Type}" forceSelection="false" change="updateIncidenceType">
                        <core:Item key="0" text="{i18n>incidenceCorrect}" ></core:Item>
                        <core:Item key="1" text="{i18n>incidencePending}"></core:Item>
                        <core:Item key="2" text="{i18n>incidenceError}"></core:Item>
                    </Select>
                </VBox>
            </HBox>
        </content>
    
    </Panel>
</core:FragmentDefinition>